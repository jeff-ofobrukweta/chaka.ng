<template>
    <header id="header">
        <nav class="nav" role="navigation" :class="{ nav__dashboard: isLoggedIn }">
            <template v-if="!isLoggedIn">
                <div class="nav-left">
                    <router-link
                        class="nav__logo"
                        :to="{ name: 'home' }"
                        exact-active-class="active"
                    >
                        <svg width="146" height="42" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <title>chaka</title>
                            <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M21.797 23.508c-1.875-4.414-4.593-7.19-7.632-8.818 1.24-3.224 3.728-6.301 7.963-8.802 2.597 1.87 5.597 4.97 7.285 8.81-3.033 1.63-5.744 4.403-7.616 8.81zm-.592 2.247c-.725 2.864-1.024 6.265-.75 10.288C12.827 37.816-3.64 31.352.726 14.392c6.414-1.045 17.594.323 20.48 11.363zm.858 9.914c6.915 2.837 25.532-3.37 20.922-21.277-7.979-1.3-23.334 1.135-20.922 21.277z"
                                fill="#22A4EF"
                            />
                            <path
                                d="M52.665 25.314c0-1.372.213-2.648.638-3.83.426-1.206 1.029-2.246 1.809-3.12a8.551 8.551 0 0 1 2.908-2.058c1.134-.496 2.411-.744 3.83-.744 1.749 0 3.404.319 4.964.957l-.922 3.511a9.638 9.638 0 0 0-1.702-.532 8.822 8.822 0 0 0-1.986-.213c-1.678 0-2.955.532-3.83 1.596-.874 1.04-1.312 2.518-1.312 4.433 0 1.844.414 3.31 1.241 4.397.828 1.064 2.223 1.596 4.185 1.596.733 0 1.454-.071 2.163-.213.71-.142 1.324-.32 1.844-.532l.603 3.546c-.473.236-1.194.45-2.163.638-.946.19-1.927.284-2.944.284-1.584 0-2.967-.236-4.149-.71-1.158-.496-2.127-1.17-2.907-2.02-.757-.875-1.324-1.903-1.703-3.086-.378-1.205-.567-2.505-.567-3.9zm17.755 9.255V7.76l4.29-.709v9.185a11.594 11.594 0 0 1 1.632-.426 10.309 10.309 0 0 1 1.88-.177c1.489 0 2.718.213 3.687.638.993.402 1.785.981 2.376 1.738.591.732 1.005 1.62 1.241 2.66.26 1.04.39 2.198.39 3.474V34.57h-4.29v-9.752c0-.993-.071-1.832-.213-2.518-.118-.709-.331-1.276-.638-1.702a2.331 2.331 0 0 0-1.17-.957c-.497-.213-1.112-.32-1.845-.32-.567 0-1.146.06-1.737.178-.591.118-1.029.225-1.312.32v14.751H70.42zm27.164-3.014c1.324 0 2.329-.071 3.014-.213V26.59a8.348 8.348 0 0 0-1.028-.212 10.28 10.28 0 0 0-2.943 0c-.473.07-.91.2-1.312.39a2.36 2.36 0 0 0-.922.815c-.237.331-.355.757-.355 1.277 0 1.016.32 1.726.958 2.128.638.378 1.5.567 2.588.567zm-.354-15.993c1.418 0 2.612.177 3.581.532.97.354 1.738.85 2.305 1.49.591.637 1.005 1.418 1.241 2.34.26.898.39 1.89.39 2.978v11.242c-.661.141-1.666.307-3.014.496-1.324.213-2.825.32-4.503.32-1.112 0-2.128-.107-3.05-.32-.922-.213-1.714-.556-2.376-1.028a5.077 5.077 0 0 1-1.525-1.844c-.354-.757-.532-1.69-.532-2.802 0-1.064.201-1.962.603-2.695a5.096 5.096 0 0 1 1.702-1.773c.71-.473 1.525-.804 2.447-.993.946-.213 1.927-.319 2.943-.319.473 0 .97.035 1.49.106.52.048 1.075.142 1.666.284v-.71c0-.496-.059-.968-.177-1.418a2.702 2.702 0 0 0-.638-1.17c-.284-.354-.674-.626-1.17-.815-.473-.19-1.076-.284-1.809-.284-.993 0-1.903.07-2.73.213-.828.142-1.502.307-2.022.496l-.532-3.475c.544-.19 1.336-.378 2.376-.568 1.04-.189 2.152-.283 3.334-.283zm17.063 7.695l1.738-1.809 1.808-1.95c.591-.662 1.147-1.288 1.667-1.88a94.976 94.976 0 0 0 1.383-1.595h5.071a251.86 251.86 0 0 1-3.759 4.113 166.323 166.323 0 0 1-3.936 4.15 23.52 23.52 0 0 1 2.234 2.162c.78.828 1.536 1.714 2.269 2.66a53.228 53.228 0 0 1 2.057 2.837c.638.946 1.17 1.82 1.596 2.624h-4.965a31.035 31.035 0 0 0-1.489-2.305 27.787 27.787 0 0 0-1.773-2.34 34.35 34.35 0 0 0-1.951-2.128 15.905 15.905 0 0 0-1.95-1.738v8.511h-4.291V7.76l4.291-.709v16.206zm21.765 8.298c1.324 0 2.329-.071 3.015-.213V26.59a8.412 8.412 0 0 0-1.029-.212 10.274 10.274 0 0 0-2.943 0c-.473.07-.91.2-1.312.39-.378.189-.686.46-.922.815-.237.331-.355.757-.355 1.277 0 1.016.319 1.726.958 2.128.638.378 1.501.567 2.588.567zm-.354-15.993c1.418 0 2.612.177 3.581.532.97.354 1.738.85 2.305 1.49.591.637 1.005 1.418 1.242 2.34.26.898.39 1.89.39 2.978v11.242c-.662.141-1.667.307-3.015.496-1.324.213-2.825.32-4.503.32-1.111 0-2.128-.107-3.05-.32-.922-.213-1.714-.556-2.376-1.028a5.087 5.087 0 0 1-1.525-1.844c-.354-.757-.532-1.69-.532-2.802 0-1.064.201-1.962.603-2.695a5.102 5.102 0 0 1 1.702-1.773c.71-.473 1.525-.804 2.447-.993.946-.213 1.927-.319 2.944-.319.472 0 .969.035 1.489.106.52.048 1.076.142 1.667.284v-.71c0-.496-.059-.968-.178-1.418a2.703 2.703 0 0 0-.638-1.17c-.284-.354-.674-.626-1.17-.815-.473-.19-1.076-.284-1.809-.284-.993 0-1.903.07-2.73.213-.828.142-1.501.307-2.022.496l-.531-3.475c.543-.19 1.335-.378 2.375-.568a18.648 18.648 0 0 1 3.334-.283z"
                                fill="#000"
                            />
                        </svg>
                    </router-link>
                    <ul class="nav__menu">
                        <li class="nav__item">
                            <router-link
                                class="nav__link"
                                to="/calculators"
                                exact-active-class="active"
                                >Calculator</router-link
                            >
                        </li>
                        <li class="nav__item">
                            <router-link class="nav__link" to="/developers" active-class="active"
                                >Developers</router-link
                            >
                        </li>
                        <li class="nav__item">
                            <router-link class="nav__link" to="/faq" active-class="active"
                                >Help</router-link
                            >
                        </li>
                        <li class="nav__item nav__item--dropdown">
                            <span class="nav__link nav__link--dropdown" href>
                                More
                                <svg
                                    width="8"
                                    height="5"
                                    fill="none"
                                    xmlns="http://www.w3.org/2000/svg"
                                >
                                    <path d="M1 1l3 3 3-3" stroke="#485964" stroke-width="1.375" />
                                </svg>
                            </span>
                            <ul class="nav__dropdown-menu">
                                <li>
                                    <router-link to="/gift" active-class="active">Gift</router-link>
                                </li>
                                <li>
                                    <router-link to="/about" active-class="active"
                                        >About Us</router-link
                                    >
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>

                <ul class="nav__menu">
                    <li class="nav__menu--auth">
                        <router-link class="btn btn__primary" :to="{ name: 'login' }"
                            >Log In</router-link
                        >
                    </li>
                    <li class="nav__menu--auth">
                        <router-link class="btn btn__primary--outline" :to="{ name: 'register' }"
                            >Sign Up</router-link
                        >
                    </li>
                </ul>

                <div ref="trigger" @click.stop="toggleDropdown" class="nav__mobile-button">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
                <div class="nav__menu--mobile">
                    <div class="nav__menu-wrapper">
                        <router-link to="/" class="nav__logo">
                            <svg
                                width="146"
                                height="42"
                                fill="none"
                                xmlns="http://www.w3.org/2000/svg"
                            >
                                <title>chaka</title>
                                <path
                                    fill-rule="evenodd"
                                    clip-rule="evenodd"
                                    d="M21.797 23.508c-1.875-4.414-4.593-7.19-7.632-8.818 1.24-3.224 3.728-6.301 7.963-8.802 2.597 1.87 5.597 4.97 7.285 8.81-3.033 1.63-5.744 4.403-7.616 8.81zm-.592 2.247c-.725 2.864-1.024 6.265-.75 10.288C12.827 37.816-3.64 31.352.726 14.392c6.414-1.045 17.594.323 20.48 11.363zm.858 9.914c6.915 2.837 25.532-3.37 20.922-21.277-7.979-1.3-23.334 1.135-20.922 21.277z"
                                    fill="#22A4EF"
                                />
                                <path
                                    d="M52.665 25.314c0-1.372.213-2.648.638-3.83.426-1.206 1.029-2.246 1.809-3.12a8.551 8.551 0 0 1 2.908-2.058c1.134-.496 2.411-.744 3.83-.744 1.749 0 3.404.319 4.964.957l-.922 3.511a9.638 9.638 0 0 0-1.702-.532 8.822 8.822 0 0 0-1.986-.213c-1.678 0-2.955.532-3.83 1.596-.874 1.04-1.312 2.518-1.312 4.433 0 1.844.414 3.31 1.241 4.397.828 1.064 2.223 1.596 4.185 1.596.733 0 1.454-.071 2.163-.213.71-.142 1.324-.32 1.844-.532l.603 3.546c-.473.236-1.194.45-2.163.638-.946.19-1.927.284-2.944.284-1.584 0-2.967-.236-4.149-.71-1.158-.496-2.127-1.17-2.907-2.02-.757-.875-1.324-1.903-1.703-3.086-.378-1.205-.567-2.505-.567-3.9zm17.755 9.255V7.76l4.29-.709v9.185a11.594 11.594 0 0 1 1.632-.426 10.309 10.309 0 0 1 1.88-.177c1.489 0 2.718.213 3.687.638.993.402 1.785.981 2.376 1.738.591.732 1.005 1.62 1.241 2.66.26 1.04.39 2.198.39 3.474V34.57h-4.29v-9.752c0-.993-.071-1.832-.213-2.518-.118-.709-.331-1.276-.638-1.702a2.331 2.331 0 0 0-1.17-.957c-.497-.213-1.112-.32-1.845-.32-.567 0-1.146.06-1.737.178-.591.118-1.029.225-1.312.32v14.751H70.42zm27.164-3.014c1.324 0 2.329-.071 3.014-.213V26.59a8.348 8.348 0 0 0-1.028-.212 10.28 10.28 0 0 0-2.943 0c-.473.07-.91.2-1.312.39a2.36 2.36 0 0 0-.922.815c-.237.331-.355.757-.355 1.277 0 1.016.32 1.726.958 2.128.638.378 1.5.567 2.588.567zm-.354-15.993c1.418 0 2.612.177 3.581.532.97.354 1.738.85 2.305 1.49.591.637 1.005 1.418 1.241 2.34.26.898.39 1.89.39 2.978v11.242c-.661.141-1.666.307-3.014.496-1.324.213-2.825.32-4.503.32-1.112 0-2.128-.107-3.05-.32-.922-.213-1.714-.556-2.376-1.028a5.077 5.077 0 0 1-1.525-1.844c-.354-.757-.532-1.69-.532-2.802 0-1.064.201-1.962.603-2.695a5.096 5.096 0 0 1 1.702-1.773c.71-.473 1.525-.804 2.447-.993.946-.213 1.927-.319 2.943-.319.473 0 .97.035 1.49.106.52.048 1.075.142 1.666.284v-.71c0-.496-.059-.968-.177-1.418a2.702 2.702 0 0 0-.638-1.17c-.284-.354-.674-.626-1.17-.815-.473-.19-1.076-.284-1.809-.284-.993 0-1.903.07-2.73.213-.828.142-1.502.307-2.022.496l-.532-3.475c.544-.19 1.336-.378 2.376-.568 1.04-.189 2.152-.283 3.334-.283zm17.063 7.695l1.738-1.809 1.808-1.95c.591-.662 1.147-1.288 1.667-1.88a94.976 94.976 0 0 0 1.383-1.595h5.071a251.86 251.86 0 0 1-3.759 4.113 166.323 166.323 0 0 1-3.936 4.15 23.52 23.52 0 0 1 2.234 2.162c.78.828 1.536 1.714 2.269 2.66a53.228 53.228 0 0 1 2.057 2.837c.638.946 1.17 1.82 1.596 2.624h-4.965a31.035 31.035 0 0 0-1.489-2.305 27.787 27.787 0 0 0-1.773-2.34 34.35 34.35 0 0 0-1.951-2.128 15.905 15.905 0 0 0-1.95-1.738v8.511h-4.291V7.76l4.291-.709v16.206zm21.765 8.298c1.324 0 2.329-.071 3.015-.213V26.59a8.412 8.412 0 0 0-1.029-.212 10.274 10.274 0 0 0-2.943 0c-.473.07-.91.2-1.312.39-.378.189-.686.46-.922.815-.237.331-.355.757-.355 1.277 0 1.016.319 1.726.958 2.128.638.378 1.501.567 2.588.567zm-.354-15.993c1.418 0 2.612.177 3.581.532.97.354 1.738.85 2.305 1.49.591.637 1.005 1.418 1.242 2.34.26.898.39 1.89.39 2.978v11.242c-.662.141-1.667.307-3.015.496-1.324.213-2.825.32-4.503.32-1.111 0-2.128-.107-3.05-.32-.922-.213-1.714-.556-2.376-1.028a5.087 5.087 0 0 1-1.525-1.844c-.354-.757-.532-1.69-.532-2.802 0-1.064.201-1.962.603-2.695a5.102 5.102 0 0 1 1.702-1.773c.71-.473 1.525-.804 2.447-.993.946-.213 1.927-.319 2.944-.319.472 0 .969.035 1.489.106.52.048 1.076.142 1.667.284v-.71c0-.496-.059-.968-.178-1.418a2.703 2.703 0 0 0-.638-1.17c-.284-.354-.674-.626-1.17-.815-.473-.19-1.076-.284-1.809-.284-.993 0-1.903.07-2.73.213-.828.142-1.501.307-2.022.496l-.531-3.475c.543-.19 1.335-.378 2.375-.568a18.648 18.648 0 0 1 3.334-.283z"
                                    fill="#000"
                                />
                            </svg>
                        </router-link>
                        <ul class="nav__mobile-list">
                            <li class="nav__item">
                                <router-link class="nav__link" :to="{ name: 'login' }"
                                    >Log In</router-link
                                >
                            </li>
                            <li class="nav__item">
                                <router-link class="nav__link" :to="{ name: 'calculator' }"
                                    >Calculator</router-link
                                >
                            </li>
                            <li class="nav__item">
                                <router-link class="nav__link" :to="{ name: 'developers' }"
                                    >Developers</router-link
                                >
                            </li>
                            <li class="nav__item">
                                <router-link class="nav__link" :to="{ name: 'faq' }"
                                    >Help</router-link
                                >
                            </li>
                            <li class="nav__item">
                                <router-link class="nav__link" :to="{ name: 'about' }"
                                    >About us</router-link
                                >
                            </li>
                        </ul>
                        <ul class="nav__meta">
                            <li class="nav__item">
                                <router-link :to="{ name: 'terms' }" class="nav__meta-link"
                                    >Terms & Conditions</router-link
                                >
                            </li>
                            <li class="nav__item">
                                <router-link :to="{ name: 'policies' }" class="nav__meta-link"
                                    >Policies & procedures</router-link
                                >
                            </li>
                            <li class="nav__item">
                                <router-link :to="{ name: 'privacy' }" class="nav__meta-link"
                                    >Privacy Policy</router-link
                                >
                            </li>
                        </ul>
                    </div>
                </div>
            </template>
            <template v-else>
                <div class="nav__dashboard--left">
                    <router-link
                        class="nav__logo"
                        :to="{ name: 'home' }"
                        exact-active-class="active"
                    >
                        <svg width="146" height="42" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <title>chaka</title>
                            <path
                                fill-rule="evenodd"
                                clip-rule="evenodd"
                                d="M21.797 23.508c-1.875-4.414-4.593-7.19-7.632-8.818 1.24-3.224 3.728-6.301 7.963-8.802 2.597 1.87 5.597 4.97 7.285 8.81-3.033 1.63-5.744 4.403-7.616 8.81zm-.592 2.247c-.725 2.864-1.024 6.265-.75 10.288C12.827 37.816-3.64 31.352.726 14.392c6.414-1.045 17.594.323 20.48 11.363zm.858 9.914c6.915 2.837 25.532-3.37 20.922-21.277-7.979-1.3-23.334 1.135-20.922 21.277z"
                                fill="#22A4EF"
                            />
                            <path
                                d="M52.665 25.314c0-1.372.213-2.648.638-3.83.426-1.206 1.029-2.246 1.809-3.12a8.551 8.551 0 0 1 2.908-2.058c1.134-.496 2.411-.744 3.83-.744 1.749 0 3.404.319 4.964.957l-.922 3.511a9.638 9.638 0 0 0-1.702-.532 8.822 8.822 0 0 0-1.986-.213c-1.678 0-2.955.532-3.83 1.596-.874 1.04-1.312 2.518-1.312 4.433 0 1.844.414 3.31 1.241 4.397.828 1.064 2.223 1.596 4.185 1.596.733 0 1.454-.071 2.163-.213.71-.142 1.324-.32 1.844-.532l.603 3.546c-.473.236-1.194.45-2.163.638-.946.19-1.927.284-2.944.284-1.584 0-2.967-.236-4.149-.71-1.158-.496-2.127-1.17-2.907-2.02-.757-.875-1.324-1.903-1.703-3.086-.378-1.205-.567-2.505-.567-3.9zm17.755 9.255V7.76l4.29-.709v9.185a11.594 11.594 0 0 1 1.632-.426 10.309 10.309 0 0 1 1.88-.177c1.489 0 2.718.213 3.687.638.993.402 1.785.981 2.376 1.738.591.732 1.005 1.62 1.241 2.66.26 1.04.39 2.198.39 3.474V34.57h-4.29v-9.752c0-.993-.071-1.832-.213-2.518-.118-.709-.331-1.276-.638-1.702a2.331 2.331 0 0 0-1.17-.957c-.497-.213-1.112-.32-1.845-.32-.567 0-1.146.06-1.737.178-.591.118-1.029.225-1.312.32v14.751H70.42zm27.164-3.014c1.324 0 2.329-.071 3.014-.213V26.59a8.348 8.348 0 0 0-1.028-.212 10.28 10.28 0 0 0-2.943 0c-.473.07-.91.2-1.312.39a2.36 2.36 0 0 0-.922.815c-.237.331-.355.757-.355 1.277 0 1.016.32 1.726.958 2.128.638.378 1.5.567 2.588.567zm-.354-15.993c1.418 0 2.612.177 3.581.532.97.354 1.738.85 2.305 1.49.591.637 1.005 1.418 1.241 2.34.26.898.39 1.89.39 2.978v11.242c-.661.141-1.666.307-3.014.496-1.324.213-2.825.32-4.503.32-1.112 0-2.128-.107-3.05-.32-.922-.213-1.714-.556-2.376-1.028a5.077 5.077 0 0 1-1.525-1.844c-.354-.757-.532-1.69-.532-2.802 0-1.064.201-1.962.603-2.695a5.096 5.096 0 0 1 1.702-1.773c.71-.473 1.525-.804 2.447-.993.946-.213 1.927-.319 2.943-.319.473 0 .97.035 1.49.106.52.048 1.075.142 1.666.284v-.71c0-.496-.059-.968-.177-1.418a2.702 2.702 0 0 0-.638-1.17c-.284-.354-.674-.626-1.17-.815-.473-.19-1.076-.284-1.809-.284-.993 0-1.903.07-2.73.213-.828.142-1.502.307-2.022.496l-.532-3.475c.544-.19 1.336-.378 2.376-.568 1.04-.189 2.152-.283 3.334-.283zm17.063 7.695l1.738-1.809 1.808-1.95c.591-.662 1.147-1.288 1.667-1.88a94.976 94.976 0 0 0 1.383-1.595h5.071a251.86 251.86 0 0 1-3.759 4.113 166.323 166.323 0 0 1-3.936 4.15 23.52 23.52 0 0 1 2.234 2.162c.78.828 1.536 1.714 2.269 2.66a53.228 53.228 0 0 1 2.057 2.837c.638.946 1.17 1.82 1.596 2.624h-4.965a31.035 31.035 0 0 0-1.489-2.305 27.787 27.787 0 0 0-1.773-2.34 34.35 34.35 0 0 0-1.951-2.128 15.905 15.905 0 0 0-1.95-1.738v8.511h-4.291V7.76l4.291-.709v16.206zm21.765 8.298c1.324 0 2.329-.071 3.015-.213V26.59a8.412 8.412 0 0 0-1.029-.212 10.274 10.274 0 0 0-2.943 0c-.473.07-.91.2-1.312.39-.378.189-.686.46-.922.815-.237.331-.355.757-.355 1.277 0 1.016.319 1.726.958 2.128.638.378 1.501.567 2.588.567zm-.354-15.993c1.418 0 2.612.177 3.581.532.97.354 1.738.85 2.305 1.49.591.637 1.005 1.418 1.242 2.34.26.898.39 1.89.39 2.978v11.242c-.662.141-1.667.307-3.015.496-1.324.213-2.825.32-4.503.32-1.111 0-2.128-.107-3.05-.32-.922-.213-1.714-.556-2.376-1.028a5.087 5.087 0 0 1-1.525-1.844c-.354-.757-.532-1.69-.532-2.802 0-1.064.201-1.962.603-2.695a5.102 5.102 0 0 1 1.702-1.773c.71-.473 1.525-.804 2.447-.993.946-.213 1.927-.319 2.944-.319.472 0 .969.035 1.489.106.52.048 1.076.142 1.667.284v-.71c0-.496-.059-.968-.178-1.418a2.703 2.703 0 0 0-.638-1.17c-.284-.354-.674-.626-1.17-.815-.473-.19-1.076-.284-1.809-.284-.993 0-1.903.07-2.73.213-.828.142-1.501.307-2.022.496l-.531-3.475c.543-.19 1.335-.378 2.375-.568a18.648 18.648 0 0 1 3.334-.283z"
                                fill="#000"
                            />
                        </svg>
                    </router-link>
                    <form class="nav-left__form">
                        <input
                            type="text"
                            name="search"
                            v-model="search"
                            placeholder="Search stocks by name, symbol, tag.."
                            class="nav-left__input"
                        />
                    </form>
                    <div class="nav-left__icon">
                        <img src="../assets/img/search.svg" alt="Search" width="18px" />
                    </div>
                </div>

                <ul class="nav__dashboard--menu">
                    <p v-if="Object.keys(getAccountSummary).length > 0">
                        <router-link
                            class="nav__dashboard--mobile"
                            :to="{ name: 'accounts-wallet' }"
                        >
                            <strong>Avail</strong>
                            <span
                                :title="
                                    getAccountSummary.localWallet.availableBalance
                                        | kobo
                                        | currency('NGN', true)
                                "
                                >:
                                {{ getAccountSummary.localWallet ?
                                    getAccountSummary.localWallet.availableBalance : '-'
                                        | kobo
                                        | currency("NGN")
                                }}</span
                            >
                            <span>&nbsp;|&nbsp;</span>
                            <span
                                :title="
                                    getAccountSummary.globalWallet.availableBalance
                                        | kobo
                                        | currency('USD', true)
                                "
                                >{{
                                    getAccountSummary.globalWallet.availableBalance
                                        | kobo
                                        | currency("USD")
                                }}</span
                            ></router-link
                        >
                        <KYCButton
                            ref="fundBtn"
                            type="button"
                            :classes="['btn__icon', 'btn__icon--md', 'btn__primary']"
                            action="fund"
                            @step="handleStep"
                            >+</KYCButton
                        >
                    </p>
                    <p v-else>
                        <router-link
                            class="nav__dashboard--mobile"
                            :to="{ name: 'accounts-wallet' }"
                        >
                            <strong>Avail:&nbsp;</strong>
                            <span>₦-</span
                            >
                            <span>&nbsp;|&nbsp;</span>
                            <span>$-</span
                            ></router-link
                        >
                        <KYCButton
                            ref="fundBtn"
                            type="button"
                            :classes="['btn__icon', 'btn__icon--md', 'btn__primary']"
                            action="fund"
                            @step="handleStep"
                            >+</KYCButton
                        >
                    </p>
                </ul>
            </template>
            <fund-modal :showModal="showFund" @close="closeFundBtn" v-if="showFund" />
            <wallet-success @close="showSuccess = false" v-if="showSuccess" />

            <modal @close="showKYC = false" v-if="showKYC">
                <template slot="header">{{ selectedField.title }}</template>
                <form @submit.prevent="submitPhone">
                    <div>
                        <ModalKYC :requiredFields="selectedField.fields" @updated="handleUpdate" />
                    </div>
                </form>
            </modal>
        </nav>
    </header>
</template>

<script>
import { mapGetters } from "vuex";
import KYCButton from "./form/KYCButton";
import ModalKYC from "./kyc/ModalKYC";
import KYCTitles from "../services/kyc/kycTitles";
export default {
    name: "app-header",
    data() {
        return {
            isSidebarOpen: false,
            search: null,
            showFund: false,
            showSuccess: false,
            showKYC: false,
            selectedField: {},
            allNextKYC: KYCTitles.titles
        };
    },
    components: {
        KYCButton,
        ModalKYC
    },
    computed: {
        ...mapGetters(["isLoggedIn", "getLoggedUser", "getAccountSummary", "getNextKYC"])
    },
    methods: {
        toggleSidebar() {
            this.isSidebarOpen = !this.isSidebarOpen;
        },
        toggleDropdown() {
            this.$refs.trigger.classList.toggle("is-active");
            this.$refs.trigger.nextElementSibling.classList.toggle("show");
            document.body.classList.toggle("no-scroll");
            this.toggleSidebar();
        },
        closeFundBtn(e) {
            if (e) this.showSuccess = true;
            this.showFund = false;
        },
        handleStep(step) {
            if (step.kyc) {
                this.showKYC = true;
                this.allNextKYC.forEach(element => {
                    element.fields.forEach(el => {
                        if (el === this.getNextKYC.nextKYC[0]) {
                            this.selectedField = element;
                            this.selectedField.fields = this.getNextKYC.nextKYC;
                        }
                    });
                });
                return true;
            } else if (step.type === "fund") {
                this.showFund = true;
            } else if (step.type === "global") {
                this.showExchange = true;
            }
        },
        handleUpdate() {
            this.showKYC = false;
            this.$refs.fundBtn.$el.click();
            return true;
        }
    },
    watch: {
        isSidebarOpen(val) {
            if (!val) {
                this.$refs.trigger.classList.remove("is-active");
                this.$refs.trigger.nextElementSibling.classList.remove("show");
                document.body.classList.remove("no-scroll");
            }
        }
    }
};
</script>
